import React, { useEffect, useState } from "react";
import { ReactNode } from "react";

interface FixedBottomContainerProps {
  children: ReactNode;
  className?: string;
}

const FixedBottomContainer = ({ children, className = "" }: FixedBottomContainerProps) => {
  const [isKeyboardOpen, setIsKeyboardOpen] = useState(false);

  useEffect(() => {
    if (typeof window === "undefined") return;
    const initialHeight = window.innerHeight;
    const onResize = () => {
      setIsKeyboardOpen(window.innerHeight < initialHeight - 100);
    };
    window.addEventListener("resize", onResize);
    return () => window.removeEventListener("resize", onResize);
  }, []);

  const bottomSpacing = isKeyboardOpen ? "16px" : "40px";

  return (
    <div
      className={`fixed bottom-0 left-0 w-full bg-white text-black shadow-lg ${className}`}
      style={{
        zIndex: 1000,
        padding: "16px",
        fontFamily: "Noto Sans JP, sans-serif",
        fontWeight: 700,
        fontSize: "21px",
        lineHeight: "28px",
        textAlign: "center",
        position: "fixed",
        bottom: bottomSpacing,
        left: 0,
        width: "100%",
        borderRadius: "16px",
      }}
    >
      <div className="container mx-auto px-4 py-2 flex justify-center items-center">
        {children}
      </div>
    </div>
  );
};

export default FixedBottomContainer;
